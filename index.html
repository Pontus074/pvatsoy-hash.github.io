<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Rymdhopparen ðŸš€</title>
<style>
  body { margin:0; font-family:Arial, sans-serif; background:#000; color:white; text-align:center; overflow:hidden;}
  canvas { display:block; margin:0 auto; background: radial-gradient(circle at top, #001, #000); border:2px solid #fff; border-radius:10px;}
  #menu, #gameOverScreen { display:none; margin-top:20px;}
  button { background:#1abc9c; border:none; padding:12px 25px; margin:10px; color:white; font-size:16px; border-radius:5px; cursor:pointer;}
  button:hover{background:#16a085;}
</style>
</head>
<body>

<header>
  <h1>ðŸš€ Rymdhopparen ðŸš€</h1>
</header>

<canvas id="gameCanvas" width="700" height="500"></canvas>

<div id="menu">
  <h2>VÃ¤lkommen!</h2>
  <p>Hoppa mellan asteroider och samla stjÃ¤rnor. Flytta med piltangenter eller touch!</p>
  <button onclick="startGame()">Starta spelet</button>
</div>

<div id="gameOverScreen">
  <h2>Game Over!</h2>
  <p id="finalScore"></p>
  <button onclick="startGame()">Starta om</button>
  <button onclick="goHome()">Till start</button>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let player = {x:100, y:canvas.height/2, width:40, height:30, vy:0};
let gravity = 0.6;
let jumpPower = -10;
let asteroids = [];
let stars = [];
let score = 0;
let playing = false;
let speed = 3;
let level = 1;
let touchY = null;

function resetGame() {
  player.y = canvas.height/2;
  player.vy = 0;
  asteroids = [];
  stars = [];
  score = 0;
  level = 1;
  speed = 3;
}

function startGame() {
  resetGame();
  playing = true;
  document.getElementById("menu").style.display = "none";
  document.getElementById("gameOverScreen").style.display = "none";
  gameLoop();
}

function goHome() {
  document.getElementById("menu").style.display = "block";
  document.getElementById("gameOverScreen").style.display = "none";
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

function gameOver() {
  playing = false;
  document.getElementById("finalScore").textContent = "Din poÃ¤ng: "+score+" | NivÃ¥: "+level;
  document.getElementById("gameOverScreen").style.display = "block";
}

// Skapa asteroider
function spawnAsteroid() {
  let height = Math.random()*80+40;
  let y = Math.random()*(canvas.height-height);
  asteroids.push({x:canvas.width, y:y, width:60, height:height});
}

// Skapa stjÃ¤rnor
function spawnStar() {
  let y = Math.random()*(canvas.height-20);
  stars.push({x:canvas.width, y:y, width:15, height:15});
}

function updatePlayer() {
  player.vy += gravity;
  player.y += player.vy;
  if(player.y + player.height > canvas.height) { player.y = canvas.height - player.height; player.vy=0; }
  if(player.y < 0) { player.y=0; player.vy=0; }
}

function gameLoop() {
  if(!playing) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // BakgrundsstjÃ¤rnor
  ctx.fillStyle="white";
  for(let i=0;i<50;i++){
    ctx.fillRect(Math.random()*canvas.width, Math.random()*canvas.height, 2,2);
  }

  updatePlayer();

  // Rita spelare
  ctx.fillStyle="cyan";
  ctx.fillRect(player.x, player.y, player.width, player.height);

  // Hantera asteroider
  ctx.fillStyle="gray";
  if(Math.random()<0.02+level*0.003) spawnAsteroid();
  asteroids.forEach((a,i)=>{
    a.x -= speed;
    ctx.fillRect(a.x, a.y, a.width, a.height);
    // Kollision
    if(player.x + player.width > a.x && player.x < a.x + a.width && player.y + player.height > a.y && player.y < a.y + a.height){
      gameOver();
    }
    if(a.x + a.width < 0) asteroids.splice(i,1);
  });

  // Hantera stjÃ¤rnor
  ctx.fillStyle="yellow";
  if(Math.random()<0.01) spawnStar();
  stars.forEach((s,i)=>{
    s.x -= speed;
    ctx.fillRect(s.x, s.y, s.width, s.height);
    if(player.x + player.width > s.x && player.x < s.x + s.width && player.y + player.height > s.y && player.y < s.y + s.height){
      score++;
      stars.splice(i,1);
      if(score % 5 === 0){ speed += 0.5; level++; }
    }
    if(s.x + s.width < 0) stars.splice(i,1);
  });

  // Text
  ctx.fillStyle="white";
  ctx.font="18px Arial";
  ctx.fillText("PoÃ¤ng: "+score, 20,30);
  ctx.fillText("NivÃ¥: "+level, 20, 50);

  requestAnimationFrame(gameLoop);
}

// Tangentbord
document.addEventListener("keydown", e=>{
  if(e.key==="ArrowUp" || e.key===" ") player.vy = jumpPower;
});

// Touch
canvas.addEventListener("touchstart", e=>{
  e.preventDefault();
  player.vy = jumpPower;
});
canvas.addEventListener("touchmove", e=>{
  touchY = e.touches[0].clientY;
});

goHome();
</script>
</body>
</html>

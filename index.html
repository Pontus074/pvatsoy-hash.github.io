<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Rymdskytt ðŸš€</title>
<style>
body { margin:0; font-family:Arial, sans-serif; background:#000; overflow:hidden;}
canvas { display:block; margin:0 auto; background:#000; border:2px solid #fff; border-radius:10px;}
#menu, #gameOverScreen { display:none; text-align:center; margin-top:20px;}
button { background:#e74c3c; border:none; padding:12px 25px; margin:10px; color:white; font-size:16px; border-radius:5px; cursor:pointer;}
button:hover{background:#c0392b;}
</style>
</head>
<body>

<canvas id="gameCanvas" width="800" height="500"></canvas>

<div id="menu">
  <h2>ðŸš€ Rymdskytt ðŸš€</h2>
  <p>RÃ¶r dig med piltangenter eller WASD. Skjut med mellanslag. Undvik fiender och samla power-ups!</p>
  <button onclick="startGame()">Starta spelet</button>
</div>

<div id="gameOverScreen">
  <h2>Game Over!</h2>
  <p id="finalScore"></p>
  <button onclick="startGame()">Starta om</button>
  <button onclick="goHome()">Till start</button>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let player = {x:100, y:canvas.height/2, width:40, height:30, speed:5};
let bullets = [];
let enemies = [];
let enemySpeed = 3;
let stars = [];
let score = 0;
let playing = false;
let keys = {};
let spawnTimer = 0;

// Skapa bakgrundsstjÃ¤rnor
for(let i=0;i<100;i++){
  stars.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, size:Math.random()*2+1});
}

function startGame() {
  player.y = canvas.height/2;
  bullets = [];
  enemies = [];
  score = 0;
  enemySpeed = 3;
  playing = true;
  spawnTimer = 0;
  document.getElementById("menu").style.display = "none";
  document.getElementById("gameOverScreen").style.display = "none";
  gameLoop();
}

function goHome() {
  document.getElementById("menu").style.display = "block";
  document.getElementById("gameOverScreen").style.display = "none";
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

function gameOver() {
  playing = false;
  document.getElementById("finalScore").textContent = "Din poÃ¤ng: "+score;
  document.getElementById("gameOverScreen").style.display = "block";
}

function updatePlayer() {
  if(keys['ArrowUp'] || keys['w']) player.y -= player.speed;
  if(keys['ArrowDown'] || keys['s']) player.y += player.speed;
  if(keys['ArrowLeft'] || keys['a']) player.x -= player.speed;
  if(keys['ArrowRight'] || keys['d']) player.x += player.speed;
  
  player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));
  player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
}

function shoot() {
  bullets.push({x:player.x+player.width, y:player.y+player.height/2-3, width:10, height:6, speed:8});
}

function spawnEnemy() {
  let y = Math.random()*(canvas.height-40);
  enemies.push({x:canvas.width, y:y, width:40, height:30});
}

function gameLoop() {
  if(!playing) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Rita bakgrundsstjÃ¤rnor
  ctx.fillStyle="white";
  stars.forEach(s=>{
    s.x -= 1;
    if(s.x<0) s.x=canvas.width;
    ctx.fillRect(s.x, s.y, s.size, s.size);
  });

  updatePlayer();

  // Rita spelare
  ctx.fillStyle="cyan";
  ctx.fillRect(player.x, player.y, player.width, player.height);

  // Skjut
  bullets.forEach((b,i)=>{
    b.x += b.speed;
    ctx.fillStyle="yellow";
    ctx.fillRect(b.x,b.y,b.width,b.height);
    if(b.x > canvas.width) bullets.splice(i,1);
  });

  // Fiender
  spawnTimer++;
  if(spawnTimer>60){
    spawnEnemy();
    spawnTimer=0;
  }

  ctx.fillStyle="red";
  enemies.forEach((e,i)=>{
    e.x -= enemySpeed;
    ctx.fillRect(e.x, e.y, e.width, e.height);

    // Kollision med spelare
    if(player.x < e.x + e.width && player.x + player.width > e.x &&
       player.y < e.y + e.height && player.y + player.height > e.y){
      gameOver();
    }

    // Kollision med skott
    bullets.forEach((b,j)=>{
      if(b.x < e.x + e.width && b.x + b.width > e.x &&
         b.y < e.y + e.height && b.y + b.height > e.y){
        bullets.splice(j,1);
        enemies.splice(i,1);
        score++;
      }
    });

    if(e.x + e.width < 0) enemies.splice(i,1);
  });

  // Text
  ctx.fillStyle="white";
  ctx.font="18px Arial";
  ctx.fillText("PoÃ¤ng: "+score, 20,30);

  requestAnimationFrame(gameLoop);
}

// Tangentbord
document.addEventListener("keydown", e=>{
  keys[e.key]=true;
  if(e.key===" "){ shoot(); }
});
document.addEventListener("keyup", e=>{
  keys[e.key]=false;
});

startGame();
</script>
</body>
</html>

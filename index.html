<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<title>Spelportalen</title>
<style>
  body { margin:0; font-family:Arial; background:#87ceeb; display:flex; justify-content:center; align-items:center; height:100vh; }
  #menu, #gameContainer { display:flex; flex-direction:column; align-items:center; justify-content:center; width:100%; height:100%; }
  button { padding:15px 30px; margin:10px; font-size:18px; cursor:pointer; border:none; border-radius:5px; background:#f0ad4e; color:white; }
  canvas { background:#222; display:block; margin:0 auto; }
</style>
</head>
<body>

<div id="menu">
  <h1>Välkommen till Spelportalen</h1>
  <button onclick="startPingis()">Pingis</button>
  <button onclick="startSkola()">Skoltråkigt-spel</button>
</div>

<div id="gameContainer" style="display:none;">
  <button style="position:absolute; top:10px; left:10px; z-index:10;" onclick="backToMenu()">Tillbaka</button>
  <canvas id="gameCanvas"></canvas>
</div>

<script>
let canvas = document.getElementById("gameCanvas");
let ctx = canvas.getContext("2d");
let gameInterval;
let currentGame = null;

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);

function backToMenu(){
  clearInterval(gameInterval);
  document.getElementById("gameContainer").style.display="none";
  document.getElementById("menu").style.display="flex";
}

function startPingis(){
  currentGame="pingis";
  document.getElementById("menu").style.display="none";
  document.getElementById("gameContainer").style.display="flex";
  resizeCanvas();
  
  // Pingis setup
  let paddleWidth=10, paddleHeight=100;
  let ballSize=15;
  let playerY=canvas.height/2-paddleHeight/2;
  let aiY=canvas.height/2-paddleHeight/2;
  let ballX=canvas.width/2, ballY=canvas.height/2;
  let ballSpeedX=5, ballSpeedY=3;

  gameInterval = setInterval(()=>{
    ctx.clearRect(0,0,canvas.width,canvas.height);
    
    // Ball
    ballX += ballSpeedX;
    ballY += ballSpeedY;

    if(ballY<0 || ballY>canvas.height) ballSpeedY*=-1;
    if(ballX<0 || ballX>canvas.width) {
      ballX=canvas.width/2; ballY=canvas.height/2;
      ballSpeedX=5; ballSpeedY=3; // Reset
    }

    // AI
    if(ballY>aiY+paddleHeight/2) aiY += 5;
    else aiY -=5;

    // Collision
    if(ballX<20 && ballY>playerY && ballY<playerY+paddleHeight) ballSpeedX*=-1;
    if(ballX>canvas.width-20 && ballY>aiY && ballY<aiY+paddleHeight) ballSpeedX*=-1;

    // Player
    document.onmousemove = function(e){
      playerY = e.clientY-paddleHeight/2;
    }

    ctx.fillStyle="white";
    ctx.fillRect(10,playerY,paddleWidth,paddleHeight);
    ctx.fillRect(canvas.width-20,aiY,paddleWidth,paddleHeight);
    ctx.fillRect(ballX-ballSize/2,ballY-ballSize/2,ballSize,ballSize);

    // Speed increase
    ballSpeedX *= 1.0005;
    ballSpeedY *= 1.0005;
  },16);
}

function startSkola(){
  currentGame="skola";
  document.getElementById("menu").style.display="none";
  document.getElementById("gameContainer").style.display="flex";
  resizeCanvas();

  // Skoltråkigt-spel setup
  let time=0;
  gameInterval=setInterval(()=>{
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle="white";
    ctx.font="30px Arial";
    
    // Bakgrund: blått=skola, grönt=fritid
    ctx.fillStyle=(time%60<30)?"#87ceeb":"#228B22";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Text
    ctx.fillStyle="white";
    ctx.fillText("Tid som gått: "+Math.floor(time)+" sek", 50,50);
    ctx.fillText("Ha kul och håll dig sysselsatt!", 50,100);

    // Tiden går snabbare när man är "i skolan"
    time += (time%60<30)?0.5:0.1;
  },100);
}
</script>
</body>
</html>
